<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Venue Management - Venue ERP Internal</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="css/internal.css">
  <style>
    .venue-card {
      background: white;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      transition: all 0.3s;
      cursor: pointer;
    }

    .venue-card:hover {
      box-shadow: 0 4px 16px rgba(0,0,0,0.15);
      transform: translateY(-4px);
    }

    .venue-image {
      width: 100%;
      height: 200px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 3rem;
      position: relative;
    }

    .venue-image.ballroom {
      background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
    }

    .venue-image.conference {
      background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
    }

    .venue-image.garden {
      background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
    }

    .venue-image.rooftop {
      background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
    }

    .venue-image.lounge {
      background: linear-gradient(135deg, #30cfd0 0%, #330867 100%);
    }

    .venue-image.terrace {
      background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
    }

    .venue-status-badge {
      position: absolute;
      top: 1rem;
      right: 1rem;
      background: rgba(255,255,255,0.95);
      padding: 0.4rem 0.8rem;
      border-radius: 20px;
      font-size: 0.75rem;
      font-weight: 700;
      text-transform: uppercase;
    }

    .venue-status-badge.active {
      color: var(--success);
    }

    .venue-status-badge.inactive {
      color: var(--danger);
    }

    .venue-body {
      padding: 1.5rem;
    }

    .venue-name {
      font-size: 1.25rem;
      font-weight: 700;
      color: var(--dark);
      margin-bottom: 0.5rem;
    }

    .venue-description {
      color: var(--gray);
      font-size: 0.9rem;
      margin-bottom: 1rem;
      line-height: 1.5;
    }

    .venue-specs {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 0.75rem;
      margin-bottom: 1rem;
      padding-bottom: 1rem;
      border-bottom: 1px solid var(--border);
    }

    .venue-spec {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      color: var(--gray);
      font-size: 0.85rem;
    }

    .venue-spec i {
      color: var(--primary);
      width: 16px;
    }

    .venue-spec-value {
      font-weight: 600;
      color: var(--dark);
    }

    .venue-price {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1rem;
    }

    .price-label {
      color: var(--gray);
      font-size: 0.85rem;
    }

    .price-value {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--success);
    }

    .venue-amenities {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      margin-bottom: 1rem;
    }

    .amenity-badge {
      background: var(--light);
      color: var(--gray);
      font-size: 0.7rem;
      padding: 0.3rem 0.6rem;
      border-radius: 12px;
      font-weight: 600;
    }

    .venue-actions {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 0.5rem;
    }

    .occupancy-bar {
      margin-top: 1rem;
      padding-top: 1rem;
      border-top: 1px solid var(--border);
    }

    .occupancy-label {
      display: flex;
      justify-content: space-between;
      margin-bottom: 0.5rem;
      font-size: 0.85rem;
    }

    .occupancy-track {
      height: 8px;
      background: var(--light);
      border-radius: 4px;
      overflow: hidden;
    }

    .occupancy-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--success), var(--primary));
      border-radius: 4px;
      transition: width 0.5s;
    }
  </style>
</head>
<body>

  <div class="panel-layout">
    <!-- Sidebar Component -->
    <div id="sidebarContainer"></div>

    <!-- Main Content -->
    <main class="main-content">
      <!-- Header Component -->
      <div id="headerContainer"></div>

      <!-- Page Content -->
      <div class="page-content">
        <div class="container-fluid">

          <!-- Stats Widgets -->
          <div class="widget-grid" id="statsWidgets"></div>

          <!-- Venues Grid -->
          <div class="grid grid-3" id="venuesGrid"></div>

        </div>
      </div>

    </main>
  </div>


  <!-- Scripts -->
  <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
  <script src="js/roles-config.js"></script>
  <script src="js/components.js"></script>
  <script src="js/modals.js"></script>
  <script src="js/modals-extended.js"></script>
  <script src="js/internal.js"></script>
  <script>
    $(document).ready(async function() {

      // ========== LOAD COMPONENTS ==========
      await ComponentLoader.loadMultiple([
        { name: 'sidebar', target: 'sidebarContainer' },
        { name: 'header', target: 'headerContainer' }
      ]);

      // Set page info
      PageManager.setTitle('Venue Management');
      PageManager.setActiveNav('venues');

      // Set quick actions
      PageManager.setQuickActions([
        {
          label: 'Add Venue',
          icon: 'fas fa-plus',
          class: 'btn-primary',
          onClick: "openModal('newVenueModal')"
        },
        {
          label: 'Availability Calendar',
          icon: 'fas fa-calendar',
          class: 'btn-secondary',
          onClick: "viewAvailability()"
        },
        {
          label: 'Pricing Settings',
          icon: 'fas fa-dollar-sign',
          class: 'btn-secondary',
          onClick: "pricingSettings()"
        }
      ]);

      // ========== RENDER WIDGETS ==========
      const widgets = [
        {
          label: 'Total Venues',
          value: '6',
          change: 'All active',
          icon: 'fas fa-building',
          iconClass: 'primary'
        },
        {
          label: 'Avg. Occupancy',
          value: '78%',
          change: '+5% from last month',
          icon: 'fas fa-chart-line',
          iconClass: 'success'
        },
        {
          label: 'Monthly Revenue',
          value: '$128,500',
          change: 'Across all venues',
          icon: 'fas fa-dollar-sign',
          iconClass: 'info'
        },
        {
          label: 'Bookings This Month',
          value: '87',
          change: '+12 from last month',
          icon: 'fas fa-calendar-check',
          iconClass: 'warning'
        }
      ];

      WidgetBuilder.renderWidgets(widgets, 'statsWidgets');

      // ========== SAMPLE VENUES DATA ==========
      const venuesData = [
        {
          id: 'V-001',
          name: 'Grand Ballroom',
          description: 'Elegant ballroom perfect for weddings and large events',
          capacity: 500,
          area: 5000,
          price: 5000,
          status: 'active',
          amenities: ['AC', 'WiFi', 'Projector', 'Sound System', 'Stage', 'Catering'],
          occupancy: 85,
          bookingsThisMonth: 18,
          type: 'ballroom'
        },
        {
          id: 'V-002',
          name: 'Conference Hall',
          description: 'Modern conference space ideal for corporate events',
          capacity: 150,
          area: 2000,
          price: 2000,
          status: 'active',
          amenities: ['AC', 'WiFi', 'Projector', 'Whiteboard', 'Video Conferencing'],
          occupancy: 72,
          bookingsThisMonth: 15,
          type: 'conference'
        },
        {
          id: 'V-003',
          name: 'Garden Lawn',
          description: 'Beautiful outdoor space with natural scenery',
          capacity: 200,
          area: 3500,
          price: 3000,
          status: 'active',
          amenities: ['Gazebo', 'Lighting', 'Sound System', 'Parking'],
          occupancy: 68,
          bookingsThisMonth: 12,
          type: 'garden'
        },
        {
          id: 'V-004',
          name: 'Rooftop Terrace',
          description: 'Scenic rooftop venue with city views',
          capacity: 120,
          area: 1800,
          price: 2500,
          status: 'active',
          amenities: ['AC', 'WiFi', 'Bar', 'Lounge Seating', 'City View'],
          occupancy: 80,
          bookingsThisMonth: 14,
          type: 'rooftop'
        },
        {
          id: 'V-005',
          name: 'Executive Lounge',
          description: 'Intimate space for small gatherings and meetings',
          capacity: 50,
          area: 800,
          price: 1200,
          status: 'active',
          amenities: ['AC', 'WiFi', 'Coffee Bar', 'Smart TV', 'Conference Phone'],
          occupancy: 65,
          bookingsThisMonth: 10,
          type: 'lounge'
        },
        {
          id: 'V-006',
          name: 'Poolside Terrace',
          description: 'Relaxing poolside venue for casual events',
          capacity: 80,
          area: 1500,
          price: 1800,
          status: 'active',
          amenities: ['Pool Access', 'Cabanas', 'BBQ Area', 'Sound System'],
          occupancy: 58,
          bookingsThisMonth: 8,
          type: 'terrace'
        }
      ];

      renderVenuesGrid(venuesData);

    });

    // ========== RENDER VENUES GRID ==========
    function renderVenuesGrid(venues) {
      const html = venues.map(venue => createVenueCard(venue)).join('');
      $('#venuesGrid').html(html);
    }

    function createVenueCard(venue) {
      return `
        <div class="venue-card" onclick="viewVenue('${venue.id}')">
          <div class="venue-image ${venue.type}">
            <i class="fas fa-${getVenueIcon(venue.type)}"></i>
            <div class="venue-status-badge ${venue.status}">
              ${venue.status}
            </div>
          </div>
          <div class="venue-body">
            <div class="venue-name">${venue.name}</div>
            <div class="venue-description">${venue.description}</div>

            <div class="venue-specs">
              <div class="venue-spec">
                <i class="fas fa-users"></i>
                <span>Capacity: <span class="venue-spec-value">${venue.capacity}</span></span>
              </div>
              <div class="venue-spec">
                <i class="fas fa-vector-square"></i>
                <span>Area: <span class="venue-spec-value">${venue.area} sq ft</span></span>
              </div>
            </div>

            <div class="venue-price">
              <span class="price-label">Starting Price</span>
              <span class="price-value">${Formatters.currency(venue.price)}</span>
            </div>

            <div class="venue-amenities">
              ${venue.amenities.slice(0, 4).map(amenity => `<span class="amenity-badge">${amenity}</span>`).join('')}
              ${venue.amenities.length > 4 ? `<span class="amenity-badge">+${venue.amenities.length - 4} more</span>` : ''}
            </div>

            <div class="venue-actions">
              <button class="btn btn-sm btn-secondary" onclick="event.stopPropagation(); editVenue('${venue.id}')">
                <i class="fas fa-edit"></i> Edit
              </button>
              <button class="btn btn-sm btn-primary" onclick="event.stopPropagation(); viewSchedule('${venue.id}')">
                <i class="fas fa-calendar"></i> Schedule
              </button>
            </div>

            <div class="occupancy-bar">
              <div class="occupancy-label">
                <span style="color: var(--gray);">Occupancy Rate</span>
                <span style="font-weight: 700; color: var(--primary);">${venue.occupancy}%</span>
              </div>
              <div class="occupancy-track">
                <div class="occupancy-fill" style="width: ${venue.occupancy}%;"></div>
              </div>
              <div style="margin-top: 0.5rem; color: var(--gray); font-size: 0.8rem;">
                ${venue.bookingsThisMonth} bookings this month
              </div>
            </div>
          </div>
        </div>
      `;
    }

    function getVenueIcon(type) {
      const icons = {
        ballroom: 'gem',
        conference: 'briefcase',
        garden: 'tree',
        rooftop: 'city',
        lounge: 'couch',
        terrace: 'umbrella-beach'
      };
      return icons[type] || 'building';
    }

    // ========== ACTION FUNCTIONS ==========
    function viewVenue(id) {
      console.log('View venue:', id);
      showVenueDetail(id);
    }

    function editVenue(id) {
      console.log('Edit venue:', id);
      showSuccessToast('Edit venue feature coming soon');
    }

    function viewSchedule(id) {
      console.log('View schedule for:', id);
      window.location.href = 'calendar.html';
    }

    function viewAvailability() {
      window.location.href = 'calendar.html';
    }

    function pricingSettings() {
      showSuccessToast('Pricing settings feature coming soon');
    }
  </script>

</body>
</html>
